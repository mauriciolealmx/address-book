(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,a){e.exports=a(544)},227:function(e,t,a){},541:function(e,t,a){},544:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),c=a.n(o),l=(a(227),a(27)),i=a(28),s=a(31),u=a(29),d=a(30),m=a(12),h=a(141),b=a.n(h),g=a(64),f=a.n(g),p=a(23),v=a.n(p),C=a(143),E=a.n(C),O=a(75),j=a.n(O),w=a(32),k=a(48),y=a(39),N=a.n(y),S=a(49),x=a.n(S),I=a(24),R=a(33),L=a.n(R),T=a(221),F=a(4),H=a.n(F),U=a(101),J=a(142),M=a.n(J),W=[{width:200,flexGrow:1,label:"Contact",dataKey:"firstName"},{width:120,flexGrow:1,label:"Name",dataKey:"firstName"},{width:120,flexGrow:1,label:"Last",dataKey:"lastName"},{width:120,flexGrow:1,label:"Email",dataKey:"email"}],A={paperRoot:Object(I.a)({$debugName:"root",marginTop:3,height:400,width:900}),tableBodyRoot:Object(I.a)({maxHeight:"50px"}),table:Object(I.a)({$debugName:"table",minWidth:700,fontFamily:"auto"}),tableCell:Object(I.a)({flex:1}),tableRow:Object(I.a)({cursor:"pointer"}),flexContainer:Object(I.a)({display:"flex",alignItems:"center",boxSizing:"border-box"}),tableRowHover:Object(I.a)({"&:hover":{backgroundColor:"#eef1ff"}}),noClick:Object(I.a)({cursor:"initial"})},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).headerHeight=56,a.rowHeight=56,a.handleRowClick=function(e){console.log(e)},a.getRowClassName=function(e){var t=e.index,n=a.props,r=n.rowClassName;n.onRowClick;return H()(A.tableRow,A.flexContainer,r,Object(w.a)({},A.tableRowHover,-1!==t&&a.handleRowClick))},a.cellRenderer=function(e){var t=e.cellData,n=e.columnIndex,o=void 0===n?null:n,c=a.props.onRowClick,l=o&&W[o].numeric||!1;return r.a.createElement(M.a,{className:H()(A.tableCell,A.flexContainer,Object(w.a)({},A.noClick,null==c)),component:"div",numeric:l,style:{height:a.rowHeight},variant:"body"},t)},a.headerRenderer=function(e){var t=e.label,n=e.columnIndex,o=n&&W[n].numeric||!1;return r.a.createElement(M.a,{className:H()(A.tableCell,A.flexContainer,A.noClick),component:"div",numeric:o,style:{height:a.headerHeight},variant:"head"},t)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"columnRendered",value:function(e){var t=this;return e.map(function(e,a){var n=e.className,o=e.dataKey,c=Object(T.a)(e,["className","dataKey"]);return r.a.createElement(U.b,Object.assign({key:o,headerRenderer:function(e){return t.headerRenderer(Object(k.a)({},e,{columnIndex:a}))},className:H()(A.flexContainer,n),cellRenderer:t.cellRenderer,dataKey:o},c))})}},{key:"render",value:function(){var e=this,t=this.props.contacts;return r.a.createElement(U.a,null,function(a){var n=a.height,o=a.width;return r.a.createElement(U.c,{className:A.table,headerHeight:e.headerHeight,height:n,onRowClick:e.handleRowClick,rowClassName:e.getRowClassName,rowCount:t.length,rowGetter:function(e){var a=e.index;return t[a]},rowHeight:e.rowHeight,width:o},e.columnRendered(W))})}}]),t}(r.a.PureComponent),K=function(e){return r.a.createElement(f.a,{className:A.paperRoot},r.a.createElement(G,{contacts:e.contacts}))};function B(e,t){return N.a.get("/users/".concat(t,"/contacts?token=").concat(e)).then(function(e){return e.data}).catch(function(e){console.error("Unable to get contact for ".concat(t),e.message)})}n.Component;var V={textField:{root:Object(I.a)({marginLeft:"20px"})},button:Object(I.a)({display:"block",margin:"auto"})};var z={contactEmail:"",contactLastName:"",contactName:""},P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=Object(k.a)({},z,{feedbackMessage:""}),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.state,a=t.contactName,n=t.contactLastName,r=t.contactEmail,o=this.props,c=o.userJwtToken,l=o.userId,i=o.updateContacts,s={email:r.toLowerCase(),firstName:x()(a),lastName:x()(n),token:c};(function(e,t){return N.a.post("/users/".concat(e,"/contacts"),t).then(function(e){return e.data}).catch(function(t){console.error("Unable to create contact for ".concat(e),t.message)})})(l,s).then(function(t){var a=t.firstName,n="User ".concat(a," was added to ").concat(l);B(c,l).then(function(t){i(t),e.setState(Object(k.a)({},z))}),e.setState({feedbackMessage:n})})}},{key:"handleChange",value:function(e,t){this.setState(Object(w.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state.feedbackMessage;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(L.a,{classes:V.textField,label:"Name",margin:"normal",onChange:function(t){return e.handleChange("contactName",t)},value:this.state.contactName}),r.a.createElement(L.a,{classes:V.textField,label:"Last Name",margin:"normal",onChange:function(t){return e.handleChange("contactLastName",t)},value:this.state.contactLastName}),r.a.createElement(L.a,{classes:V.textField,label:"Email Address",margin:"normal",onChange:function(t){return e.handleChange("contactEmail",t)},value:this.state.contactEmail}),r.a.createElement(v.a,{color:"primary",onClick:this.handleSubmit,variant:"outlined",className:V.button},"Create Contact")),t&&r.a.createElement("div",null,t))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",isValidEmail:!0},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.state,a=t.email,n=t.password;if(function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(a)){this.setState({isValidEmail:!0});var r={email:a,password:n};N.a.post("/login",r).then(function(t){var a=e.props,n=a.updateToken,r=a.updateUserId,o=a.updateContacts,c=t.data,l=c.token,i=c.email,s=x()(function(e){return e.split("@")[0]}(i));n(l),r(s),B(l,s).then(function(e){o(e)}),e.setState({successMessage:"Assigned token: ".concat(l," for ").concat(i)})}).catch(function(e){console.error("Unable to login user ".concat(a),e.message)})}else this.setState({isValidEmail:!1})}},{key:"handleChange",value:function(e,t){this.setState(Object(w.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state.successMessage;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(L.a,{autoComplete:"email",fullWidth:!0,label:"Email",margin:"normal",onChange:function(t){return e.handleChange("email",t)},type:"email",value:this.state.email}),r.a.createElement(L.a,{autoComplete:"current-password",fullWidth:!0,label:"Password",margin:"normal",onChange:function(t){return e.handleChange("password",t)},type:"password",value:this.state.password}),r.a.createElement(v.a,{color:"primary",fullWidth:!0,onClick:this.handleSubmit,variant:"outlined"},"SIGN IN")),t&&r.a.createElement("div",null,t),!this.state.isValidEmail&&r.a.createElement("div",null,"Please Enter a valid Email address"))}}]),t}(n.Component);var D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",serverError:"",successMessage:""},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e,t){this.setState(Object(w.a)({},e,t.target.value))}},{key:"handleSubmit",value:function(){var e=this,t=this.state;(function(e){return N.a.post("/register",e).then(function(e){return e.data}).catch(function(e){return console.error("Could not register user: ".concat(e))})})({email:t.email,password:t.password}).then(function(t){var a=t.email;e.setState({successMessage:"Registered user ".concat(a)})}).catch(function(t){var a="Could not register user: ".concat(t);console.error(a),e.setState({serverError:a})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.serverError,n=t.successMessage;return r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(L.a,{autoComplete:"email",fullWidth:!0,label:"Email",margin:"normal",onChange:function(t){return e.handleChange("email",t)},value:this.state.email}),r.a.createElement(L.a,{fullWidth:!0,label:"Password",margin:"normal",onChange:function(t){return e.handleChange("password",t)},type:"password",value:this.state.password}),r.a.createElement(v.a,{color:"primary",onClick:this.handleSubmit,variant:"outlined",fullWidth:!0},"Submit")),a&&r.a.createElement("div",null,a),n&&r.a.createElement("div",null,r.a.createElement("div",null,"Thanks for registering"),r.a.createElement("div",null,n)))}}]),t}(n.Component),Z=a(219),q=a.n(Z),Q=a(220),X=a.n(Q),Y={root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}};var _=function(e){var t=e.userId;return r.a.createElement("div",{style:Y.root},r.a.createElement(q.a,{position:"static"},r.a.createElement(X.a,null,e.isLoggedIn&&r.a.createElement(v.a,{color:"inherit"},"="),r.a.createElement(j.a,{variant:"h6",color:"inherit",style:Y.grow},"Address Book"),e.isLoggedIn&&r.a.createElement("div",null,r.a.createElement(v.a,{onClick:e.logOut,color:"inherit"},"Logout"),r.a.createElement(v.a,{color:"inherit"},t)))))},ee={textField:{root:Object(I.a)({marginLeft:"20px"})},button:Object(I.a)({display:"block",margin:"auto"})};var te={contactLastName:"",contactName:"",feedbackMessage:""},ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=Object(k.a)({},te),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this,t=this.state,a=t.contactName,n=t.contactLastName,r=this.props,o=r.userJwtToken,c=r.userId,l=r.updateContacts,i={firstName:x()(a),lastName:x()(n),token:o};(function(e,t){return N.a.put("/users/".concat(e,"/contacts"),t).then(function(e){return e.data}).catch(function(t){console.error("Unable to create contact for ".concat(e),t.message)})})(c,i).then(function(t){B(o,c).then(function(t){l(t),e.setState(Object(k.a)({},te))})})}},{key:"handleChange",value:function(e,t){this.setState(Object(w.a)({},e,t.target.value))}},{key:"render",value:function(){var e=this,t=this.state.feedbackMessage;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(L.a,{classes:ee.textField,label:"Name",margin:"normal",onChange:function(t){return e.handleChange("contactName",t)},value:this.state.contactName}),r.a.createElement(L.a,{classes:ee.textField,label:"Last Name",margin:"normal",onChange:function(t){return e.handleChange("contactLastName",t)},value:this.state.contactLastName}),r.a.createElement(v.a,{color:"primary",onClick:this.handleSubmit,variant:"outlined",className:ee.button},"Delete Contact")),t&&r.a.createElement("div",null,t))}}]),t}(n.Component),ne=(a(541),{root:Object(I.a)({width:450,height:510,boxSizing:"border-box",padding:"48px 40px 36px 40px"})}),re={userContacts:[],userId:"",userJwtToken:"",signIn:!0},oe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state=b()(re),e.createSignInToggle=e.createSignInToggle.bind(Object(m.a)(Object(m.a)(e))),e.logOut=e.logOut.bind(Object(m.a)(Object(m.a)(e))),e.updateContacts=e.updateContacts.bind(Object(m.a)(Object(m.a)(e))),e.updateToken=e.updateToken.bind(Object(m.a)(Object(m.a)(e))),e.updateUserId=e.updateUserId.bind(Object(m.a)(Object(m.a)(e))),e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"updateToken",value:function(e){this.setState({userJwtToken:e})}},{key:"updateUserId",value:function(e){this.setState({userId:e})}},{key:"updateContacts",value:function(e){this.setState({userContacts:e})}},{key:"isLoggedIn",value:function(){var e=this.state,t=e.userJwtToken,a=e.userId;return t&&a}},{key:"logOut",value:function(){this.setState(b()(re))}},{key:"createSignInToggle",value:function(){this.setState(function(e){return{signIn:!e.signIn}})}},{key:"render",value:function(){var e=this.state,t=e.userJwtToken,a=e.userId,n=e.userContacts,o=e.signIn,c=n.length>0,l=this.isLoggedIn();return r.a.createElement("div",{className:"App"},r.a.createElement(_,{userId:a,isLoggedIn:this.isLoggedIn(),logOut:this.logOut}),r.a.createElement("div",{className:"App-header"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{userJwtToken:t,userId:a,updateContacts:this.updateContacts}),r.a.createElement(ae,{userJwtToken:t,userId:a,updateContacts:this.updateContacts})):r.a.createElement(f.a,{classes:{root:ne.root}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:"h1",variant:"h5",style:{padding:"35px"}},"Sign in"),r.a.createElement($,{updateToken:this.updateToken,updateUserId:this.updateUserId,updateContacts:this.updateContacts}),r.a.createElement(E.a,null,r.a.createElement(v.a,{onClick:this.createSignInToggle,color:"primary"},"Create account"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:"h1",variant:"h5",style:{padding:"35px"}},"Create account"),r.a.createElement(D,null),r.a.createElement(E.a,null,r.a.createElement(v.a,{onClick:this.createSignInToggle,color:"primary"},"Sign In")))),r.a.createElement("hr",null),c&&r.a.createElement(K,{contacts:n})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,2,1]]]);
//# sourceMappingURL=main.3510d0f8.chunk.js.map